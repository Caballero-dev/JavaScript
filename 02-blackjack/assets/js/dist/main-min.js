import{createDeck as e,requestCard as t,cardValue as n}from"./deck-min.js";import{updatePoints as a,createCard as s,resetPoints as o,clearCards as r,showResult as d}from"./ui-min.js";let deck=[],playersPoints=[],btnNew=document.querySelector("#btnNew"),btnRequest=document.querySelector("#btnRequest"),btnStop=document.querySelector("#btnStop"),startGame=(t=2)=>{deck=e(),playersPoints=[];for(let n=0;n<t;n++)playersPoints.push(0);r(),o(),btnRequest.disabled=!1,btnStop.disabled=!1},accumulatePoints=(e,t)=>(playersPoints[t]=playersPoints[t]+n(e),a(playersPoints[t],t),playersPoints[t]),determineWinner=()=>{let[e,t]=playersPoints;e>t&&e<=21?d("Jugador gana :)"):e<=21&&t>21?d("Jugador gana :) :)"):t>e&&t<=21?d("Computadora gano :("):t<=21&&e>21?d("Computadora gano :( :("):d("Nadie ha ganado >_<")},computerTurn=e=>{let n=0;do{let a=t(deck),o=playersPoints.length-1;n=accumulatePoints(a,o),s(a,o)}while(n<e&&e<=21);determineWinner()};btnRequest.addEventListener("click",()=>{let e=t(deck),n=accumulatePoints(e,0);s(e,0),n>21?(btnRequest.disabled=!0,btnStop.disabled=!0,computerTurn(n)):21===n&&(btnRequest.disabled=!0,btnStop.disabled=!0,computerTurn(n))}),btnStop.addEventListener("click",()=>{btnRequest.disabled=!0,btnStop.disabled=!0,computerTurn(playersPoints[0])}),btnNew.addEventListener("click",()=>{startGame()});